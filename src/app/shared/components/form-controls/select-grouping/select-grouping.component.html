<mat-form-field style="width: 34rem;">
  <mat-select placeholder="{{
      'shared.select_recursive_grouping.option_placeholder' | translate
    }}" [formControl]="selectControl" #singleSelect>
    <div class="filter">
      <mat-select-search [formControl]="filterControl"></mat-select-search>
    </div>

    <mat-option *ngIf="optionlist?.length ===0" class="empty-row"></mat-option>

    <!-- <mat-select-trigger class="list-item">
      <span class="p4-16 list-item__content">{{optionLabel ? selectedItem[optionLabel]: selectedItem}}</span>
    </mat-select-trigger> -->

    <!-- default cell template -->
    <ng-template let-model="model" #defaultTemplate>
      <div class="list-item">
        <!-- Icon -->
        <mat-icon aria-hidden="false" aria-label="Example home icon">home</mat-icon>
        <!-- <span *ngIf="model.icon" class="list-item__icon" [ngClass]="model.icon"></span> -->

        <!-- text -->
        <div class="list-item__content">
          <span>{{ model.viewValue }}</span>
        </div>
      </div>
    </ng-template>

    <!-- mat-optGroup template -->
    <ng-template #matOptGroupTemplate let-model="model">

      <mat-option [value]="model.value">
        <ng-container *ngTemplateOutlet="defaultTemplate;context: { model: model }"></ng-container>
      </mat-option>

      <!-- <div class="custom-optGroup">
        <mat-optgroup>
          <div class="list-item-header">
            <mat-icon aria-hidden="false" aria-label="Example home icon">home</mat-icon>
            <div>
              <span>{{ model.viewValue }}</span>
            </div>
          </div>
          <mat-option *ngFor="let option of model.children" [value]="option.value">
            <ng-container *ngTemplateOutlet="defaultTemplate; context: { model: option }"></ng-container>
          </mat-option>
        </mat-optgroup>
      </div> -->
    </ng-template>

    <!--Option Template-->
    <ng-template #matOptionTemplate let-model="model">
      <div *ngFor="let option of model.children">
        <ng-container [ngSwitch]="getChildren(option)">
          <ng-container *ngSwitchCase="false">
            <mat-option [value]="option.value">
              <ng-container *ngTemplateOutlet="defaultTemplate;context: { model: option }"></ng-container>
            </mat-option>
          </ng-container>
          <ng-container *ngSwitchCase="true">
            <ng-container *ngTemplateOutlet="matOptGroupTemplate;context: { model: option }"></ng-container>
          </ng-container>
        </ng-container>
      </div>
    </ng-template>

    <!--Principal-->
    <mat-optgroup *ngFor="let group of filteredOptions | async" [disabled]="group.disabled">
      <div>
        <!-- Icon -->
        <mat-icon aria-hidden="false" aria-label="Example home icon">home</mat-icon>
        <!-- <span *ngIf="model.icon" class="list-item__icon" [ngClass]="model.icon"></span> -->

        <!-- text -->
        <span>{{ group.viewValue }}</span>
      </div>
      <ng-container *ngTemplateOutlet="matOptionTemplate; context: { model: group }"></ng-container>
    </mat-optgroup>

  </mat-select>
</mat-form-field>
